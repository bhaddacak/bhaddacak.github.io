/*! nirumoggutil.js (c) J.R. Bhaddacak @license (GPL3) */
"use strict";
const nirumoggUtil = {};
nirumoggUtil.xref = { ka: "kacc", rū: "rupa", mo: "mogg", nī: "sadd" };
nirumoggUtil.nirumogg = { "1": "1.1", "622": "6.16", "637": "5.129", "549": "4.119", "277": "4.97", "707": "5.7", "560": "4.142", "635": "6.51", "658": "5.71", "16": "1.16", "278": "4.98", "770": "5.60", "656": "6.28", "586": "6.33", "588": "6.35", "585": "6.15", "455": "4.21", "287": "4.107", "190": "2.164", "391": "3.58", "384": "3.81", "377": "3.49", "482": "4.86", "345": "3.10", "272": "2.293", "63": "2.38", "290": "2.38", "457": "4.23", "202": "2.78", "255": "2.227", "195": "2.111", "200": "2.111", "230": "2.202", "787": "5.127", "584": "6.5", "349": "3.75", "488": "4.92", "438": "4.5", "608": "5.137", "551": "4.121", "413": "3.16", "788": "5.48", "300": "2.10", "268": "2.235", "493": "4.62", "265": "2.232", "313": "2.27", "75": "3.26", "184": "2.171", "332": "3.2", "417": "3.94", "371": "3.44", "288": "2.118", "791": "5.35", "642": "5.84", "785": "5.91", "778": "5.29", "732": "5.111", "109": "2.108", "108": "2.41", "634": "6.50", "638": "5.128", "795": "5.34", "376": "3.48", "572": "5.90", "148": "2.157", "535": "4.77", "543": "4.49", "93": "2.59", "473": "4.134", "421": "3.98", "743": "5.147", "60": "1.58", "515": "4.116", "274": "2.241", "557": "4.136", "774": "5.66", "722": "5.27", "783": "5.44", "130": "2.146", "601": "6.2", "752": "5.150", "412": "3.15", "600": "6.17", "587": "6.4", "129": "2.149", "8": "1.8", "143": "2.190", "619": "6.36", "35": "1.33", "491": "4.60", "529": "4.71", "419": "3.96", "214": "2.141", "357": "3.19", "247": "2.208", "422": "3.100", "54": "1.35", "428": "3.105", "66": "2.24", "309": "2.24", "51": "1.46", "424": "3.101", "427": "3.104", "511": "4.54", "326": "2.35", "321": "2.22", "68": "2.39", "320": "2.39", "17": "1.17", "411": "3.14", "692": "5.15", "792": "5.45", "742": "5.146", "649": "5.126", "626": "6.69", "534": "4.76", "645": "6.30", "476": "4.80", "372": "3.50", "2": "1.2", "609": "6.22", "271": "2.238", "610": "5.132", "753": "5.151", "517": "4.110", "727": "5.108", "612": "5.103", "712": "5.12", "281": "4.101", "750": "5.145", "373": "3.45", "688": "6.44", "617": "5.139", "415": "3.92", "650": "5.124", "761": "5.169", "552": "4.120", "663": "5.21", "114": "2.175", "429": "3.106", "169": "2.134", "256": "2.231", "243": "2.220", "61": "2.1", "3": "1.3", "420": "3.97", "519": "4.112", "235": "2.135", "504": "4.55", "425": "3.102", "333": "2.119", "97": "2.64", "41": "1.37", "566": "5.89", "38": "1.31", "595": "6.40", "633": "6.55", "497": "4.140", "686": "6.72", "615": "6.66", "604": "6.7", "583": "6.78", "676": "6.63", "589": "6.38", "581": "6.75", "582": "6.47", "662": "5.178", "723": "5.109", "769": "5.59", "800": "5.42", "611": "5.176", "639": "5.173", "644": "6.29", "385": "3.82", "724": "5.115", "82": "2.117", "158": "2.187", "292": "2.4", "470": "4.35", "105": "2.69", "103": "2.72", "185": "2.58", "98": "2.65", "84": "2.60", "11": "1.11", "203": "2.101", "360": "3.24", "85": "2.45", "76": "3.32", "204": "2.63", "777": "5.28", "737": "5.154", "101": "2.67", "42": "3.38", "361": "3.25", "12": "1.12", "374": "3.46", "781": "5.32", "319": "2.21", "106": "2.70", "699": "5.77", "655": "6.67", "760": "5.166", "654": "5.99", "786": "5.99", "293": "2.5", "657": "6.25", "58": "1.50", "614": "6.68", "790": "5.37", "308": "2.19", "577": "6.8", "125": "2.153", "567": "6.57", "302": "2.12", "576": "6.48", "527": "4.39", "625": "6.31", "624": "6.41", "636": "6.56", "652": "6.21", "793": "5.52", "224": "2.125", "388": "3.55", "225": "2.201", "226": "2.197", "474": "4.94", "594": "6.46", "678": "6.64", "758": "5.168", "171": "2.182", "276": "4.96", "801": "5.49", "70": "3.26", "362": "3.67", "528": "4.70", "705": "5.5", "802": "5.50", "542": "4.69", "442": "4.9", "400": "3.61", "725": "5.116", "181": "2.84", "83": "2.115", "648": "5.174", "647": "5.123", "537": "4.67", "405": "3.70", "297": "2.7", "144": "2.81", "201": "2.113", "703": "5.102", "556": "4.135", "673": "5.23", "286": "4.106", "6": "1.6", "779": "5.98", "687": "6.24", "304": "2.3", "199": "2.79", "531": "4.73", "64": "2.2", "291": "2.2", "558": "4.137", "459": "4.25", "351": "3.108", "789": "5.36", "803": "5.51", "683": "5.177", "681": "6.23", "729": "5.118", "682": "5.133", "739": "5.141", "532": "4.74", "521": "4.109", "514": "4.115", "715": "5.55", "767": "5.57", "564": "5.18", "718": "5.33", "280": "4.100", "434": "4.3", "65": "2.16", "305": "2.16", "708": "5.8", "613": "5.79", "685": "6.70", "231": "2.130", "694": "5.69", "700": "5.76", "440": "4.7", "782": "5.31", "234": "2.200", "540": "4.57", "499": "4.44", "232": "2.198", "745": "5.152", "233": "2.199", "697": "5.81", "696": "5.2", "116": "2.107", "559": "4.127", "561": "5.14", "716": "5.56", "407": "3.72", "410": "3.13", "643": "6.34", "194": "2.85", "784": "5.41", "359": "3.22", "113": "2.110", "363": "3.68", "664": "5.161", "806": "5.47", "809": "5.100", "808": "5.94", "807": "5.159", "671": "5.24", "574": "6.37", "603": "6.49", "568": "5.17", "651": "6.73", "646": "6.26", "640": "5.83", "307": "2.18", "298": "2.8", "487": "4.91", "177": "2.83", "31": "1.39", "165": "2.114", "659": "5.75", "744": "5.158", "436": "4.131", "555": "4.138", "365": "3.52", "402": "3.63", "183": "2.162", "182": "2.57", "128": "2.150", "458": "4.24", "432": "4.126", "765": "5.93", "115": "2.144", "454": "4.128", "398": "3.59", "733": "5.96", "776": "5.162", "695": "5.80", "501": "4.46", "773": "5.65", "21": "1.21", "441": "4.8", "507": "4.52", "227": "2.129", "526": "4.38", "525": "4.37", "77": "3.33", "47": "1.44", "253": "2.209", "485": "4.89", "593": "6.45", "632": "6.54", "735": "5.157", "755": "5.106", "756": "5.149", "479": "4.82", "618": "5.97", "270": "2.237", "71": "3.37", "370": "3.43", "28": "1.28", "380": "3.77", "100": "2.167", "20": "1.20", "294": "2.6", "379": "3.76", "445": "4.12", "602": "6.3", "159": "2.185", "142": "2.191", "677": "6.62", "223": "2.126", "174": "2.74", "242": "2.47", "189": "2.163", "245": "2.204", "261": "2.230", "260": "2.210", "492": "4.61", "236": "2.136", "212": "2.139", "229": "2.87", "18": "1.18", "704": "5.72", "444": "4.11", "273": "2.240", "167": "2.82", "135": "2.222", "257": "2.228", "104": "2.71", "674": "5.120", "117": "2.106", "675": "6.61", "198": "2.80", "569": "5.85", "666": "5.85", "337": "2.121", "172": "2.183", "717": "5.170", "52": "1.38", "468": "4.141", "460": "4.26", "764": "5.104", "324": "2.33", "197": "2.42", "627": "5.160", "573": "5.20", "548": "4.40", "698": "5.3", "616": "5.122", "641": "5.135", "449": "4.16", "503": "4.48", "469": "4.34", "154": "2.179", "149": "2.159", "661": "5.179", "478": "4.85", "147": "2.194", "175": "2.76", "430": "4.1", "393": "3.87", "630": "5.130", "121": "2.215", "126": "2.92", "127": "2.148", "772": "5.64", "119": "2.151", "25": "1.25", "810": "5.68", "435": "4.4", "443": "4.10", "530": "4.72", "343": "3.8", "591": "6.42", "689": "6.76", "734": "5.156", "554": "4.123", "118": "2.105", "766": "5.92", "607": "5.131", "251": "2.90", "318": "2.20", "15": "1.15", "67": "2.26", "312": "2.26", "7": "1.7", "578": "6.9", "368": "3.41", "341": "3.5", "730": "5.95", "29": "1.40", "702": "5.101", "399": "3.60", "5": "1.5", "597": "5.70", "596": "6.6", "27": "1.27", "533": "4.75", "62": "2.37", "289": "2.37", "314": "2.28", "299": "2.9", "720": "5.62", "571": "5.16", "483": "4.87", "193": "2.177", "524": "4.36", "10": "1.10", "690": "6.77", "211": "2.143", "563": "6.14", "409": "3.110", "336": "2.120", "599": "6.18", "719": "5.63", "4": "1.4", "740": "5.143", "161": "2.184", "160": "2.192", "179": "2.96", "246": "2.207", "389": "3.56", "456": "4.22", "317": "2.31", "404": "3.65", "763": "5.88", "757": "5.164", "132": "2.154", "139": "2.221", "136": "2.123", "439": "4.6", "771": "5.171", "138": "2.223", "500": "4.132", "426": "3.103", "192": "2.176", "89": "2.62", "375": "3.47", "392": "3.85", "315": "2.29", "754": "5.148", "498": "4.43", "364": "3.69", "209": "2.137", "520": "4.108", "394": "3.86", "208": "2.99", "56": "1.56", "330": "2.23", "279": "4.99", "285": "4.105", "713": "5.13", "710": "5.10", "481": "4.84", "759": "5.167", "381": "3.78", "301": "2.11", "306": "2.17", "669": "6.58", "668": "5.121", "550": "4.122", "516": "4.117", "358": "3.20", "804": "5.43", "386": "3.83", "367": "3.40", "141": "2.225", "580": "6.12", "342": "3.6", "329": "2.15", "205": "2.100", "541": "4.68", "30": "1.53", "553": "4.125", "738": "5.140", "547": "4.45", "23": "1.23", "352": "3.21", "369": "3.42", "512": "4.50", "382": "3.79", "406": "3.71", "269": "2.236", "53": "1.34", "350": "3.107", "26": "1.26", "749": "5.117", "748": "5.144", "446": "4.13", "163": "2.188", "311": "2.44", "510": "4.53", "131": "2.145", "14": "1.14", "69": "2.32", "323": "2.32", "328": "2.14", "579": "6.11", "631": "6.53", "794": "5.53", "484": "4.88", "252": "2.211", "222": "2.127", "96": "2.66", "170": "2.147", "107": "2.109", "86": "2.97", "262": "2.214", "151": "2.160", "145": "2.196", "112": "2.43", "157": "2.180", "140": "2.224", "263": "2.226", "176": "2.77", "206": "2.102", "401": "3.62", "489": "4.93", "408": "3.73", "523": "4.118", "210": "2.52", "679": "6.65", "217": "2.46", "670": "6.59", "239": "2.56", "146": "2.195", "110": "2.98", "162": "2.186", "264": "2.203", "94": "2.89", "736": "5.155", "111": "2.51", "665": "5.25", "32": "1.55", "335": "3.23", "331": "3.1", "522": "4.113", "33": "1.47", "310": "2.25", "502": "4.47", "283": "4.103", "684": "6.71", "447": "4.14", "495": "4.41", "461": "4.27", "472": "4.78", "462": "4.28", "452": "4.19", "397": "3.89", "334": "3.9", "680": "5.26", "187": "2.173", "691": "5.138", "348": "3.74", "546": "4.65", "390": "3.57", "19": "1.19", "477": "4.81", "250": "2.169", "746": "5.153", "538": "4.64", "221": "2.132", "490": "4.59", "508": "4.51", "464": "4.30", "629": "6.52", "536": "4.66", "448": "4.15", "467": "4.33", "122": "2.218", "45": "1.52", "213": "2.140", "465": "4.31", "453": "4.20", "354": "3.18", "466": "4.32", "44": "1.48", "259": "2.229", "258": "2.213", "267": "2.234", "544": "4.58", "463": "4.29", "451": "4.18", "545": "4.18", "168": "2.133", "152": "2.158", "775": "5.67", "667": "6.60", "219": "2.54", "606": "5.175", "768": "5.58", "726": "5.114", "693": "5.1", "237": "2.168", "249": "2.206", "90": "2.104", "191": "2.174", "418": "3.95", "244": "2.205", "416": "3.93", "275": "4.95", "123": "2.217", "186": "2.172", "575": "6.10", "628": "5.22", "322": "2.40", "396": "3.88", "254": "2.212", "701": "5.4", "721": "5.61", "728": "5.119", "762": "5.165", "480": "4.83", "621": "6.20", "216": "2.128", "102": "2.170", "240": "2.50", "387": "3.84", "590": "6.39", "706": "5.6", "81": "3.34", "303": "2.13", "623": "6.19", "378": "3.54", "437": "4.129", "653": "6.27", "731": "5.110", "539": "4.56", "433": "4.2", "780": "5.30", "751": "5.112", "43": "1.49", "46": "1.41", "805": "5.46", "134": "2.155", "50": "1.45", "353": "3.17", "24": "1.24", "366": "3.53", "475": "4.79", "513": "4.114", "338": "2.122", "164": "2.189", "562": "6.1", "518": "4.111", "215": "2.142", "395": "3.90", "59": "1.51", "178": "2.94", "55": "1.54", "797": "5.38", "414": "3.91", "13": "1.13", "403": "3.64", "316": "2.30", "22": "1.22", "423": "3.99", "346": "3.11", "40": "1.36", "798": "5.39", "282": "4.102", "741": "5.113", "74": "3.28", "325": "2.34", "471": "4.130", "87": "2.103", "99": "2.73", "496": "4.42", "339": "3.3", "714": "5.73", "327": "2.36", "37": "1.30", "57": "1.57", "340": "3.4", "92": "2.116", "49": "1.43", "48": "1.42", "91": "2.88", "241": "2.219", "180": "2.95", "133": "2.156", "207": "2.138", "266": "2.233", "196": "2.112", "173": "2.75", "153": "2.181", "166": "2.93", "150": "2.161", "155": "2.178", "9": "1.9", "36": "1.29", "565": "5.82", "39": "5.136", "620": "5.136", "78": "3.30", "156": "2.193", "80": "3.35", "120": "2.91" };
nirumoggUtil.moggniru = {};
nirumoggUtil.getMoggNumber = function(niruNum) {
	let result = "";
	if (niruNum in this.nirumogg)
		result = this.nirumogg[niruNum];
	return result;
};
nirumoggUtil.getNiruNumber = function(moggNum) {
	let result = [];
	if (moggNum in this.moggniru)
		result = this.moggniru[moggNum];
	return result;
};
nirumoggUtil.computeMoggNiru = function() {
	for (const niru in this.nirumogg) {
		const mogg = this.nirumogg[niru];
		if (mogg in this.moggniru)
			this.moggniru[mogg].push(niru);
		else
			this.moggniru[mogg] = [niru];
	}
};
nirumoggUtil.addMoggXrefLinks = function(text) {
	let result = text;
	const niru = text.match(/Niru \d+/);
	if (niru !== null)
		result = result.replace(niru[0], "<a style='cursor:pointer;' onClick=nirumoggUtil.openMoggXref('" + escape(niru[0]) + "');>" + niru[0] + "</a>");
	return result;
};
nirumoggUtil.addNiruXrefLinks = function(text) {
	let result = text;
	const ka = text.match(/ka\. \d+/);
	if (ka !== null)
		result = result.replace(ka[0], "<a style='cursor:pointer;' onClick=nirumoggUtil.openNiruXref('" + escape(ka[0]) + "');>" + ka[0] + "</a>");
	const ru = text.match(/rū\. \d+/);
	if (ru !== null)
		result = result.replace(ru[0], "<a style='cursor:pointer;' onClick=nirumoggUtil.openNiruXref('" + escape(ru[0]) + "');>" + ru[0] + "</a>");
	const ni = text.match(/nī\. \d+/);
	if (ni !== null)
		result = result.replace(ni[0], "<a style='cursor:pointer;' onClick=nirumoggUtil.openNiruXref('" + escape(ni[0]) + "');>" + ni[0] + "</a>");
	const mo = text.match(/mo\. \d\.\d+/);
	if (mo !== null)
		result = result.replace(mo[0], "<a style='cursor:pointer;' onClick=nirumoggUtil.openNiruXref('" + escape(mo[0]) + "');>" + mo[0] + "</a>");
	return result;
};
nirumoggUtil.openMoggXref = function(input) {
	const link = unescape(input);
	const firstSpace = link.indexOf(" ");
	const book = link.slice(0, firstSpace).toLowerCase();
	const num = link.slice(firstSpace+1).trim();
	window.open("/" + book + "?" + num, "mogg-xref-" + book);
};
nirumoggUtil.openNiruXref = function(input) {
	const link = unescape(input);
	const firstDot = link.indexOf(".");
	const book = link.slice(0, firstDot);
	const num = link.slice(firstDot+1).trim();
	window.open("/" + this.xref[book] + "?" + num, "niru-xref-" + book);
};

